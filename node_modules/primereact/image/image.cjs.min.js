"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/api"),r=require("primereact/csstransition"),n=require("primereact/hooks"),o=require("primereact/iconbase"),i=require("primereact/icons/eye"),a=require("primereact/icons/refresh"),l=require("primereact/icons/searchminus"),c=require("primereact/icons/searchplus"),u=require("primereact/icons/times"),s=require("primereact/icons/undo"),p=require("primereact/portal"),f=require("primereact/utils"),m=require("primereact/componentbase");function g(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var d=y(e),v=g(t);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function E(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function P(e){var t=E(e,"string");return"symbol"===b(t)?t:String(t)}function C(e,t,r){return(t=P(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e){if(Array.isArray(e))return e}function w(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}function j(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,t){return I(e)||w(e,t)||x(e,t)||j()}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P(n.key),n)}}var N=function(){function e(){S(this,e)}var t,r,n;return t=e,n=[{key:"equals",value:function(e,t,r){return r&&e&&"object"===b(e)&&t&&"object"===b(t)?this.resolveFieldData(e,r)===this.resolveFieldData(t,r):this.deepEquals(e,t)}},{key:"deepEquals",value:function(e,t){if(e===t)return!0;if(e&&t&&"object"==b(e)&&"object"==b(t)){var r,n,o,i=Array.isArray(e),a=Array.isArray(t);if(i&&a){if((n=e.length)!==t.length)return!1;for(r=n;0!=r--;)if(!this.deepEquals(e[r],t[r]))return!1;return!0}if(i!==a)return!1;var l=e instanceof Date,c=t instanceof Date;if(l!==c)return!1;if(l&&c)return e.getTime()===t.getTime();var u=e instanceof RegExp,s=t instanceof RegExp;if(u!==s)return!1;if(u&&s)return e.toString()===t.toString();var p=Object.keys(e);if((n=p.length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,p[r]))return!1;for(r=n;0!=r--;)if(!this.deepEquals(e[o=p[r]],t[o]))return!1;return!0}return e!=e&&t!=t}},{key:"resolveFieldData",value:function(t,r){if(t&&Object.keys(t).length&&r){if(this.isFunction(r))return r(t);if(e.isNotEmpty(t[r]))return t[r];if(-1===r.indexOf("."))return t[r];for(var n=r.split("."),o=t,i=0,a=n.length;i<a;++i){if(null==o)return null;o=o[n[i]]}return o}return null}},{key:"isFunction",value:function(e){return!!(e&&e.constructor&&e.call&&e.apply)}},{key:"isLetter",value:function(e){return e&&(e.toUpperCase()!=e.toLowerCase()||e.codePointAt(0)>127)}},{key:"findDiffKeys",value:function(e,t){return e&&t?Object.keys(e).filter((function(e){return!t.hasOwnProperty(e)})).reduce((function(t,r){return t[r]=e[r],t}),{}):{}}},{key:"reduceKeys",value:function(e,t){var r={};return e&&t&&0!==t.length?(Object.keys(e).filter((function(e){return t.some((function(t){return e.startsWith(t)}))})).forEach((function(t){r[t]=e[t],delete e[t]})),r):r}},{key:"reorderArray",value:function(e,t,r){e&&t!==r&&(r>=e.length&&(r%=e.length,t%=e.length),e.splice(r,0,e.splice(t,1)[0]))}},{key:"findIndexInList",value:function(e,t,r){var n=this;return t?t.findIndex(r?function(t){return n.equals(t,e,r)}:function(t){return t===e}):-1}},{key:"getJSXElement",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.isFunction(e)?e.apply(void 0,r):e}},{key:"getProp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e?e[t]:void 0;return void 0===r?(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})[t]:r}},{key:"getMergedProps",value:function(e,t){return Object.assign({},t,e)}},{key:"getDiffProps",value:function(e,t){return this.findDiffKeys(e,t)}},{key:"getPropValue",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.isFunction(e)?e.apply(void 0,r):e}},{key:"getComponentProp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.isNotEmpty(e)?this.getProp(e.props,t,r):void 0}},{key:"getComponentProps",value:function(e,t){return this.isNotEmpty(e)?this.getMergedProps(e.props,t):void 0}},{key:"getComponentDiffProps",value:function(e,t){return this.isNotEmpty(e)?this.getDiffProps(e.props,t):void 0}},{key:"isValidChild",value:function(e,t,r){if(e){var n=(this.getComponentProp(e,"__TYPE")||(e.type?e.type.displayName:void 0))===t;return n}return!1}},{key:"getRefElement",value:function(e){return e?"object"===b(e)&&e.hasOwnProperty("current")?e.current:e:null}},{key:"combinedRefs",value:function(e,t){e&&t&&("function"==typeof t?t(e.current):t.current=e.current)}},{key:"removeAccents",value:function(e){return e&&e.search(/[\xC0-\xFF]/g)>-1&&(e=e.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),e}},{key:"convertToFlatCase",value:function(e){return this.isNotEmpty(e)?e.replace(/(-|_)/g,"").toLowerCase():e}},{key:"isEmpty",value:function(e){return null==e||""===e||Array.isArray(e)&&0===e.length||!(e instanceof Date)&&"object"===b(e)&&0===Object.keys(e).length}},{key:"isNotEmpty",value:function(e){return!this.isEmpty(e)}},{key:"sort",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=e.compare(t,r,arguments.length>3?arguments[3]:void 0,n),a=n;return(e.isEmpty(t)||e.isEmpty(r))&&(a=1===o?n:o),a*i}},{key:"compare",value:function(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=e.isEmpty(t),a=e.isEmpty(r);return i&&a?0:i?o:a?-o:"string"==typeof t&&"string"==typeof r?t.localeCompare(r,n,{numeric:!0}):t<r?-1:t>r?1:0}}],(r=null)&&D(t.prototype,r),n&&D(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),U=0;function F(){return U++,"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pr_id_").concat(U)}var q=d.memo(d.forwardRef((function(e,t){var r=o.IconBase.getPTI(e),n=k(d.useState(e.id),2),i=n[0],a=n[1];return d.useEffect((function(){N.isEmpty(i)&&a(F("pr_icon_clip_"))}),[i]),d.createElement("svg",h({ref:t,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),d.createElement("g",{clipPath:"url(#".concat(i,")")},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.0118 10C6.93296 10.0003 6.85484 9.98495 6.78202 9.95477C6.7091 9.92454 6.64297 9.88008 6.58749 9.82399L3.38288 6.62399C3.27675 6.51025 3.21897 6.35982 3.22171 6.20438C3.22446 6.04893 3.28752 5.90063 3.39761 5.7907C3.5077 5.68077 3.65622 5.6178 3.81188 5.61505C3.96755 5.61231 4.1182 5.67001 4.23211 5.77599L6.41125 7.95201V0.6C6.41125 0.44087 6.47456 0.288258 6.58724 0.175736C6.69993 0.063214 6.85276 0 7.01212 0C7.17148 0 7.32431 0.063214 7.43699 0.175736C7.54968 0.288258 7.61298 0.44087 7.61298 0.6V7.95198L9.7921 5.77599C9.90601 5.67001 10.0567 5.61231 10.2123 5.61505C10.368 5.6178 10.5165 5.68077 10.6266 5.7907C10.7367 5.90063 10.7997 6.04893 10.8025 6.20438C10.8052 6.35982 10.7475 6.51025 10.6413 6.62399L7.43671 9.82399C7.38124 9.88008 7.3151 9.92454 7.24219 9.95477C7.16938 9.98495 7.09127 10.0003 7.01244 10C7.01233 10 7.01223 10 7.01212 10C7.01201 10 7.0119 10 7.0118 10ZM13.45 13.3115C13.0749 13.7235 12.5521 13.971 11.9952 14H2.02889C1.75106 13.9887 1.47819 13.9228 1.2259 13.806C0.973606 13.6893 0.74684 13.524 0.558578 13.3197C0.370316 13.1153 0.224251 12.8759 0.128742 12.6152C0.0332333 12.3544 -0.00984502 12.0774 0.00197194 11.8V9.39999C0.00197194 9.24086 0.065277 9.08825 0.177961 8.97572C0.290645 8.8632 0.443477 8.79999 0.602836 8.79999C0.762195 8.79999 0.915027 8.8632 1.02771 8.97572C1.1404 9.08825 1.2037 9.24086 1.2037 9.39999V11.8C1.18301 12.0375 1.25469 12.2739 1.40385 12.4601C1.55302 12.6463 1.76823 12.768 2.00485 12.8H11.9952C12.2318 12.768 12.4471 12.6463 12.5962 12.4601C12.7454 12.2739 12.8171 12.0375 12.7964 11.8V9.39999C12.7964 9.24086 12.8597 9.08825 12.9724 8.97572C13.085 8.8632 13.2379 8.79999 13.3972 8.79999C13.5566 8.79999 13.7094 8.8632 13.8221 8.97572C13.9348 9.08825 13.9981 9.24086 13.9981 9.39999V11.8C14.0221 12.3563 13.8251 12.8995 13.45 13.3115Z",fill:"currentColor"})),d.createElement("defs",null,d.createElement("clipPath",{id:i},d.createElement("rect",{width:"14",height:"14",fill:"white"}))))})));q.displayName="DownloadIcon";var A=m.ComponentBase.extend({defaultProps:{__TYPE:"Image",alt:null,className:null,closeIcon:null,crossOrigin:null,decoding:null,downloadIcon:null,downloadable:!1,height:null,imageClassName:null,imageStyle:null,indicatorIcon:null,loading:null,onError:null,onHide:null,onShow:null,preview:!1,referrerPolicy:null,rotateLeftIcon:null,rotateRightIcon:null,src:null,template:null,useMap:null,width:null,zoomInIcon:null,zoomOutIcon:null,zoomSrc:null,children:void 0}});function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=d.memo(d.forwardRef((function(e,o){var m=A.getProps(e),g=k(d.useState(!1),2),y=g[0],b=g[1],E=k(d.useState(!1),2),P=E[0],C=E[1],I=k(d.useState(0),2),w=I[0],O=I[1],x=k(d.useState(1),2),j=x[0],S=x[1],D=d.useRef(null),N=d.useRef(null),U=d.useRef(null),F=d.useRef(null),R=d.useRef(!1),_=A.setMetaData({props:m,state:{maskVisible:y,previewVisible:P,rotate:w,scale:j}}).ptm,T=function(){m.preview&&(b(!0),setTimeout((function(){C(!0)}),25))},z=function(){R.current||(C(!1),O(0),S(1)),R.current=!1},L=function(){R.current=!0},B=function(){f.DomHandler.saveAs({name:m.alt,src:m.src}),R.current=!0},V=function(){O((function(e){return e+90})),R.current=!0},J=function(){O((function(e){return e-90})),R.current=!0},X=function(){S((function(e){return e+.1})),R.current=!0},H=function(){S((function(e){return e-.1})),R.current=!0},Z=function(){f.ZIndexUtils.set("modal",U.current,v.default.autoZIndex,v.default.zIndex.modal)},K=function(){m.onShow&&m.onShow()},Y=function(){f.DomHandler.addClass(U.current,"p-component-overlay-leave")},W=function(){m.onHide&&m.onHide()},$=function(){f.ZIndexUtils.clear(U.current),b(!1)};n.useUnmountEffect((function(){U.current&&f.ZIndexUtils.clear(U.current)}));d.useImperativeHandle(o,(function(){return{props:m,show:T,hide:z,getElement:function(){return D.current},getImage:function(){return N.current}}}));var G,Q=m.src,ee=m.alt,te=m.width,re=m.height,ne=m.crossOrigin,oe=m.referrerPolicy,ie=m.useMap,ae=m.loading,le=f.classNames("p-image p-component",m.className,{"p-image-preview-container":m.preview}),ce=function(){var e=m.downloadable,n=m.alt,o=m.crossOrigin,i=m.referrerPolicy,p=m.useMap,g=m.loading,y={transform:"rotate("+w+"deg) scale("+j+")"},v=j<=.5,b=j>=1.5,E=f.mergeProps(_("downloadIcon")),C=f.mergeProps(_("rotateRightIcon")),I=f.mergeProps(_("rotateLeftIcon")),O=f.mergeProps(_("zoomOutIcon")),x=f.mergeProps(_("zoomInIcon")),k=f.mergeProps(_("closeIcon")),S=f.IconUtils.getJSXIcon(m.downloadIcon||d.createElement(q,null),M({},E),{props:m}),D=f.IconUtils.getJSXIcon(m.rotateRightIcon||d.createElement(a.RefreshIcon,null),M({},C),{props:m}),N=f.IconUtils.getJSXIcon(m.rotateLeftIcon||d.createElement(s.UndoIcon,null),M({},I),{props:m}),A=f.IconUtils.getJSXIcon(m.zoomOutIcon||d.createElement(l.SearchMinusIcon,null),M({},O),{props:m}),R=f.IconUtils.getJSXIcon(m.zoomInIcon||d.createElement(c.SearchPlusIcon,null),M({},x),{props:m}),T=f.IconUtils.getJSXIcon(m.closeIcon||d.createElement(u.TimesIcon,null),M({},k),{props:m}),G=f.mergeProps({ref:U,className:"p-image-mask p-component-overlay p-component-overlay-enter",onPointerUp:z},_("mask")),Q=f.mergeProps({className:"p-image-toolbar"},_("toolbar")),ee=f.mergeProps({className:"p-image-action p-link",onPointerUp:B,type:"button"},_("downloadButton")),te=f.mergeProps({className:"p-image-action p-link",onPointerUp:V,type:"button"},_("rotateRightButton")),re=f.mergeProps({className:"p-image-action p-link",onPointerUp:J,type:"button"},_("rotateLeftButton")),ne=f.mergeProps({className:"p-image-action p-link",onPointerUp:H,type:"button",disabled:v},_("zoomOutButton")),oe=f.mergeProps({className:"p-image-action p-link",onPointerUp:X,type:"button",disabled:b},_("zoomInButton")),ie=f.mergeProps({className:"p-image-action p-link",type:"button","aria-label":t.localeOption("close")},_("closeButton")),ae=f.mergeProps({src:m.zoomSrc||m.src,className:"p-image-preview",style:y,onPointerUp:L,crossOrigin:o,referrerPolicy:i,useMap:p,loading:g},_("preview")),le=f.mergeProps({ref:F},_("previewContainer"));return d.createElement("div",G,d.createElement("div",Q,e&&d.createElement("button",ee,S),d.createElement("button",te,D),d.createElement("button",re,N),d.createElement("button",ne,A),d.createElement("button",oe,R),d.createElement("button",ie,T)),d.createElement(r.CSSTransition,{nodeRef:F,classNames:"p-image-preview",in:P,timeout:{enter:150,exit:150},unmountOnExit:!0,onEntering:Z,onEntered:K,onExit:Y,onExiting:W,onExited:$},d.createElement("div",le,d.createElement("img",h({alt:n},ae)))))}(),ue=f.mergeProps({className:"p-image-preview-icon"},_("icon")),se=f.IconUtils.getJSXIcon(m.indicatorIcon||d.createElement(i.EyeIcon,ue),M({},ue),{props:m}),pe=m.template?f.ObjectUtils.getJSXElement(m.template,m):se,fe=(G=f.mergeProps({className:"p-image-preview-indicator",onClick:T},_("button")),m.preview?d.createElement("div",G,pe):null),me=f.mergeProps({ref:N,src:Q,className:m.imageClassName,width:te,height:re,crossOrigin:ne,referrerPolicy:oe,useMap:ie,loading:ae,style:m.imageStyle,onError:m.onError},_("image")),ge=m.src&&d.createElement("img",h({},me,{alt:ee})),ye=f.mergeProps({ref:D,className:le},A.getOtherProps(m),_("root"));return d.createElement("span",ye,ge,fe,y&&d.createElement(p.Portal,{element:ce,appendTo:document.body}))})));_.displayName="Image",exports.Image=_;
