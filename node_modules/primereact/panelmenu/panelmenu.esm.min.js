import*as e from"react";import{CSSTransition as t}from"primereact/csstransition";import{useMountEffect as n,useUpdateEffect as r}from"primereact/hooks";import{ChevronDownIcon as l}from"primereact/icons/chevrondown";import{ChevronRightIcon as a}from"primereact/icons/chevronright";import{classNames as o,mergeProps as i,IconUtils as u,ObjectUtils as c,UniqueComponentId as m}from"primereact/utils";import{ComponentBase as s}from"primereact/componentbase";function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e){var t=f(e,"string");return"symbol"===p(t)?t:String(t)}function b(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){if(Array.isArray(e))return y(e)}function g(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function O(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e){return v(e)||g(e)||O(e)||h()}function N(e){if(Array.isArray(e))return e}function S(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a,o,i=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);u=!0);}catch(e){c=!0,l=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw l}}return i}}function j(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P(e,t){return N(e)||S(e,t)||O(e,t)||j()}var x=s.extend({defaultProps:{__TYPE:"Panel",id:null,model:null,style:null,submenuIcon:null,className:null,multiple:!1,transitionOptions:null,children:void 0}});function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=e.memo((function(r){var m=P(e.useState(null),2),s=m[0],p=m[1],f=function(e,t){return r.ptm(t,{context:{active:y(e)}})},d=function(){if(r.model){if(r.multiple)return r.model.filter((function(e){return e.expanded}));var e=null;return r.model.forEach((function(t){t.expanded&&(e?t.expanded=!1:e=t)})),e}return null},b=function(e,t){if(t.disabled)e.preventDefault();else{t.url||e.preventDefault(),t.command&&t.command({originalEvent:e,item:t});var n=s;y(t)?(t.expanded=!1,p(r.multiple?n.filter((function(e){return e!==t})):null)):(!r.multiple&&n&&(n.expanded=!1),t.expanded=!0,p(r.multiple?[].concat(E(n||[]),[t]):t))}},y=function(e){return s&&(r.multiple?s.indexOf(e)>-1:s===e)};n((function(){p(d())}));var v=function(t){var n=i({key:"separator_"+t,className:"p-menu-separator"},r.ptm("separator"));return e.createElement("li",n)},g=function(n,l){var a=o("p-toggleable-content",{"p-toggleable-content-collapsed":!l}),u=e.createRef(),c=i({ref:u,className:a},r.ptm("toggleableContent"));return n.items?e.createElement(t,{nodeRef:u,classNames:"p-toggleable-content",timeout:{enter:1e3,exit:450},in:l,unmountOnExit:!0},e.createElement("div",c,e.createElement(C,{menuProps:r.menuProps,model:n.items,multiple:r.multiple,submenuIcon:r.submenuIcon,ptm:r.ptm}))):null},O=function(t,n){if(!1===t.visible)return null;var m=t.label+"_"+n,s=y(t),p=o("p-menuitem",t.className),d=o("p-menuitem-link",{"p-disabled":t.disabled}),v=o("p-menuitem-icon",t.icon),O=i({className:v},f(t,"icon")),h=u.getJSXIcon(t.icon,w({},O),{props:r.menuProps}),E=i({className:"p-menuitem-text"},f(t,"label")),N=t.label&&e.createElement("span",E,t.label),S="p-panelmenu-icon",j=i({className:S},f(t,"submenuicon")),P=t.items&&u.getJSXIcon(s?r.submenuIcon||e.createElement(l,j):r.submenuIcon||e.createElement(a,j)),x=g(t,s),I=i({href:t.url||"#",className:d,target:t.target,onClick:function(e){return b(e,t)},role:"menuitem","aria-disabled":t.disabled},f(t,"action")),C=e.createElement("a",I,P,h,N);t.template&&(C=c.getJSXElement(t.template,t,{onClick:function(e){return b(e,t)},className:d,labelClassName:"p-menuitem-text",iconClassName:v,submenuIconClassName:S,element:C,props:r,leaf:!t.items,active:s}));var D=i({key:m,id:t.id,className:p,style:t.style,role:"none"},f(t,"menuitem"));return e.createElement("li",D,C,x)},h=function(e,t){return e.separator?v(t):O(e,t)},N=o("p-submenu-list",r.className),S=r.model?r.model.map(h):null,j=i({className:N,role:"tree"},r.ptm("menu"));return e.createElement("ul",j,S)}));function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}C.displayName="PanelMenuSub";var A=e.memo(e.forwardRef((function(s,p){var f=x.getProps(s),d=P(e.useState(f.id),2),b=d[0],y=d[1],v=P(e.useState(null),2),g=v[0],O=v[1],h=P(e.useState(!1),2),N=h[0],S=h[1],j=e.useRef(null),I=b+"_header",w=b+"_content",D=x.setMetaData({props:f,state:{id:b,activeItem:g,animationDisabled:N}}).ptm,A=function(){if(f.model){if(f.multiple)return f.model.filter((function(e){return e.expanded}));var e=null;return f.model.forEach((function(t){t.expanded&&(e?t.expanded=!1:e=t)})),e}return null},_=function(e,t){if(t.disabled)e.preventDefault();else{t.url||e.preventDefault(),t.command&&t.command({originalEvent:e,item:t});var n=g;J(t)?(t.expanded=!1,O(f.multiple?n.filter((function(e){return e!==t})):null)):(!f.multiple&&n&&(n.expanded=!1),t.expanded=!0,O(f.multiple?[].concat(E(n||[]),[t]):t))}},J=function(e){return g&&(f.multiple?g.indexOf(e)>-1:g===e)},R=function(e,t){return D(t,{context:{active:J(e)}})};e.useImperativeHandle(p,(function(){return{props:f,getElement:function(){return j.current}}})),n((function(){b||y(m()),O(A())})),r((function(){S(!0),O(A())}),[f.model]);var X=function(){S(!1)},T=function(n,r){if(!1===n.visible)return null;var m=n.label+"_"+r,s=J(n),p=o("p-panelmenu-panel",n.className),d=o("p-component p-panelmenu-header",{"p-highlight":s,"p-disabled":n.disabled}),b=o("p-menuitem-icon",n.icon),y=i({className:b},R(n,"headerIcon")),v=u.getJSXIcon(n.icon,k({},y),{props:f}),g="p-panelmenu-icon",O=i({className:g},R(n,"headerSubmenuIcon")),h=n.items&&u.getJSXIcon(s?f.submenuIcon||e.createElement(l,O):f.submenuIcon||e.createElement(a,O)),E=i({className:"p-menuitem-text"},R(n,"headerLabel")),S=n.label&&e.createElement("span",E,n.label),j=o("p-toggleable-content",{"p-toggleable-content-collapsed":!s}),P=e.createRef(),x=i({href:n.url||"#",className:"p-panelmenu-header-link",onClick:function(e){return _(e,n)},"aria-expanded":s,id:I,"aria-controls":w,"aria-disabled":n.disabled},R(n,"headerAction")),A=e.createElement("a",x,h,v,S);n.template&&(A=c.getJSXElement(n.template,n,{onClick:function(e){return _(e,n)},className:"p-panelmenu-header-link",labelClassName:"p-menuitem-text",submenuIconClassName:g,iconClassName:b,element:A,props:f,leaf:!n.items,active:s}));var T=i({key:m,className:p,style:n.style},R(n,"panel")),M=i({className:d,style:n.style},R(n,"header")),H=i({className:"p-panelmenu-content"},R(n,"menuContent")),L=i({ref:P,className:j,role:"region",id:w,"aria-labelledby":I},R(n,"headerToggleableContent"));return e.createElement("div",T,e.createElement("div",M,A),e.createElement(t,{nodeRef:P,classNames:"p-toggleable-content",timeout:{enter:1e3,exit:450},onEnter:X,disabled:N,in:s,unmountOnExit:!0,options:f.transitionOptions},e.createElement("div",L,e.createElement("div",H,e.createElement(C,{menuProps:f,model:n.items,className:"p-panelmenu-root-submenu",multiple:f.multiple,submenuIcon:f.submenuIcon,ptm:D})))))},M=o("p-panelmenu p-component",f.className),H=f.model?f.model.map(T):null,L=i({id:f.id,ref:j,className:M,style:f.style},x.getOtherProps(f),D("root"));return e.createElement("div",L,H)})));A.displayName="PanelMenu";export{A as PanelMenu};
